{"ast":null,"code":"export function initializeMap(mapboxgl, map) {\n  map.on(\"click\", \"data\", function (e) {\n    var features = map.queryRenderedFeatures(e.point, {\n      layers: [\"data\"]\n    });\n    var clusterId = features[0].properties.cluster_id;\n    map.getSource(\"dcmusic.live\").getClusterExpansionZoom(clusterId, function (err, zoom) {\n      if (err) return;\n      map.easeTo({\n        center: features[0].geometry.coordinates,\n        zoom: zoom\n      });\n    });\n  });\n  map.on(\"click\", \"unclustered-point\", function (e) {\n    var coordinates = e.features[0].geometry.coordinates.slice();\n    var mag = e.features[0].properties.mag;\n    var tsunami;\n\n    if (e.features[0].properties.tsunami === 1) {\n      tsunami = \"yes\";\n    } else {\n      tsunami = \"no\";\n    }\n\n    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n      coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n    }\n\n    new mapboxgl.Popup().setLngLat(coordinates) //.setHTML(\"magnitude: \" + mag + \"<br>Was there a tsunami?: \" + tsunami)\n    .setHTML(\"This is a spot\").addTo(map);\n  });\n  map.addControl(new mapboxgl.GeolocateControl({\n    positionOptions: {\n      enableHighAccuracy: true\n    },\n    trackUserLocation: true\n  }));\n  map.on(\"mouseenter\", \"data\", function () {\n    map.getCanvas().style.cursor = \"pointer\";\n  });\n  map.on(\"mouseleave\", \"data\", function () {\n    map.getCanvas().style.cursor = \"\";\n  });\n}","map":null,"metadata":{},"sourceType":"module"}