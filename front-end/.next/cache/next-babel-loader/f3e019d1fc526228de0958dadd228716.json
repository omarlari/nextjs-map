{"ast":null,"code":"export function addDataLayer(map, data) {\n  if (!map.getSource(\"dcmusic.live\")) {\n    map.addSource(\"dcmusic.live\", {\n      type: \"geojson\",\n      data: data,\n      cluster: true,\n      clusterMaxZoom: 14,\n      clusterRadius: 50,\n      clusterProperties: {\n        sum: [\"+\", [\"get\", \"event_count\"]]\n      }\n    });\n  } else {\n    map.getSource(\"dcmusic.live\").setData(data);\n  }\n\n  map.addLayer({\n    id: \"clusters\",\n    type: \"circle\",\n    source: \"dcmusic.live\",\n    filter: [\"has\", \"point_count\"],\n    paint: {\n      \"circle-color\": \"rgb(229, 36, 59)\",\n      \"circle-radius\": [\"step\", [\"get\", \"point_count\"], 20, 100, 30, 750, 40],\n      \"circle-opacity\": 0.75,\n      \"circle-stroke-width\": 4,\n      \"circle-stroke-color\": \"#fff\",\n      \"circle-stroke-opacity\": 0.5\n    }\n  });\n  map.addLayer({\n    id: \"cluster-count\",\n    type: \"symbol\",\n    source: \"dcmusic.live\",\n    filter: [\"has\", \"point_count\"],\n    layout: {\n      \"text-field\": \"{sum}\",\n      \"text-font\": [\"Open Sans Bold\"],\n      \"text-size\": 16\n    },\n    paint: {\n      \"text-color\": \"white\"\n    }\n  });\n  map.addLayer({\n    id: \"unclustered-point\",\n    type: \"circle\",\n    source: \"dcmusic.live\",\n    filter: [\"!\", [\"has\", \"point_count\"]],\n    paint: {\n      \"circle-radius\": [\"step\", [\"get\", \"event_count\"], 20, 100, 30, 750, 40],\n      \"circle-color\": \"rgb(229, 36, 59)\",\n      \"circle-opacity\": 0.75,\n      \"circle-stroke-width\": 4,\n      \"circle-stroke-color\": \"#fff\",\n      \"circle-stroke-opacity\": 0.5\n    }\n  });\n  map.addLayer({\n    id: \"event-count\",\n    type: \"symbol\",\n    source: \"dcmusic.live\",\n    filter: [\"!\", [\"has\", \"point_count\"]],\n    layout: {\n      \"text-field\": \"{event_count}\",\n      \"text-font\": [\"Open Sans Bold\"],\n      \"text-size\": 16\n    },\n    paint: {\n      \"text-color\": \"white\"\n    }\n  });\n}","map":{"version":3,"sources":["/Users/olari/github-repos/nextjs-map/front-end/map/addDataLayer.js"],"names":["addDataLayer","map","data","getSource","addSource","type","cluster","clusterMaxZoom","clusterRadius","clusterProperties","sum","setData","addLayer","id","source","filter","paint","layout"],"mappings":"AAAA,OAAO,SAASA,YAAT,CAAsBC,GAAtB,EAA2BC,IAA3B,EAAiC;AACtC,MAAI,CAACD,GAAG,CAACE,SAAJ,CAAc,cAAd,CAAL,EAAoC;AAClCF,IAAAA,GAAG,CAACG,SAAJ,CAAc,cAAd,EAA8B;AAC5BC,MAAAA,IAAI,EAAE,SADsB;AAE5BH,MAAAA,IAAI,EAAEA,IAFsB;AAG5BI,MAAAA,OAAO,EAAE,IAHmB;AAI5BC,MAAAA,cAAc,EAAE,EAJY;AAK5BC,MAAAA,aAAa,EAAE,EALa;AAM5BC,MAAAA,iBAAiB,EAAE;AACjBC,QAAAA,GAAG,EAAE,CAAC,GAAD,EAAM,CAAC,KAAD,EAAQ,aAAR,CAAN;AADY;AANS,KAA9B;AAUD,GAXD,MAWO;AACLT,IAAAA,GAAG,CAACE,SAAJ,CAAc,cAAd,EAA8BQ,OAA9B,CAAsCT,IAAtC;AACD;;AAEDD,EAAAA,GAAG,CAACW,QAAJ,CAAa;AACXC,IAAAA,EAAE,EAAE,UADO;AAEXR,IAAAA,IAAI,EAAE,QAFK;AAGXS,IAAAA,MAAM,EAAE,cAHG;AAIXC,IAAAA,MAAM,EAAE,CAAC,KAAD,EAAQ,aAAR,CAJG;AAKXC,IAAAA,KAAK,EAAE;AACL,sBAAgB,kBADX;AAEL,uBAAiB,CAAC,MAAD,EAAS,CAAC,KAAD,EAAQ,aAAR,CAAT,EAAiC,EAAjC,EAAqC,GAArC,EAA0C,EAA1C,EAA8C,GAA9C,EAAmD,EAAnD,CAFZ;AAGL,wBAAkB,IAHb;AAIL,6BAAuB,CAJlB;AAKL,6BAAuB,MALlB;AAML,+BAAyB;AANpB;AALI,GAAb;AAeAf,EAAAA,GAAG,CAACW,QAAJ,CAAa;AACXC,IAAAA,EAAE,EAAE,eADO;AAEXR,IAAAA,IAAI,EAAE,QAFK;AAGXS,IAAAA,MAAM,EAAE,cAHG;AAIXC,IAAAA,MAAM,EAAE,CAAC,KAAD,EAAQ,aAAR,CAJG;AAKXE,IAAAA,MAAM,EAAE;AACN,oBAAc,OADR;AAEN,mBAAa,CAAC,gBAAD,CAFP;AAGN,mBAAa;AAHP,KALG;AAUXD,IAAAA,KAAK,EAAE;AACL,oBAAc;AADT;AAVI,GAAb;AAeAf,EAAAA,GAAG,CAACW,QAAJ,CAAa;AACXC,IAAAA,EAAE,EAAE,mBADO;AAEXR,IAAAA,IAAI,EAAE,QAFK;AAGXS,IAAAA,MAAM,EAAE,cAHG;AAIXC,IAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAC,KAAD,EAAQ,aAAR,CAAN,CAJG;AAKXC,IAAAA,KAAK,EAAE;AACL,uBAAiB,CAAC,MAAD,EAAS,CAAC,KAAD,EAAQ,aAAR,CAAT,EAAiC,EAAjC,EAAqC,GAArC,EAA0C,EAA1C,EAA8C,GAA9C,EAAmD,EAAnD,CADZ;AAEL,sBAAgB,kBAFX;AAGL,wBAAkB,IAHb;AAIL,6BAAuB,CAJlB;AAKL,6BAAuB,MALlB;AAML,+BAAyB;AANpB;AALI,GAAb;AAeAf,EAAAA,GAAG,CAACW,QAAJ,CAAa;AACXC,IAAAA,EAAE,EAAE,aADO;AAEXR,IAAAA,IAAI,EAAE,QAFK;AAGXS,IAAAA,MAAM,EAAE,cAHG;AAIXC,IAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAC,KAAD,EAAQ,aAAR,CAAN,CAJG;AAKXE,IAAAA,MAAM,EAAE;AACN,oBAAc,eADR;AAEN,mBAAa,CAAC,gBAAD,CAFP;AAGN,mBAAa;AAHP,KALG;AAUXD,IAAAA,KAAK,EAAE;AACL,oBAAc;AADT;AAVI,GAAb;AAcD","sourcesContent":["export function addDataLayer(map, data) {\n  if (!map.getSource(\"dcmusic.live\")) {\n    map.addSource(\"dcmusic.live\", {\n      type: \"geojson\",\n      data: data,\n      cluster: true,\n      clusterMaxZoom: 14,\n      clusterRadius: 50,\n      clusterProperties: {\n        sum: [\"+\", [\"get\", \"event_count\"]],\n      },\n    });\n  } else {\n    map.getSource(\"dcmusic.live\").setData(data);\n  }\n\n  map.addLayer({\n    id: \"clusters\",\n    type: \"circle\",\n    source: \"dcmusic.live\",\n    filter: [\"has\", \"point_count\"],\n    paint: {\n      \"circle-color\": \"rgb(229, 36, 59)\",\n      \"circle-radius\": [\"step\", [\"get\", \"point_count\"], 20, 100, 30, 750, 40],\n      \"circle-opacity\": 0.75,\n      \"circle-stroke-width\": 4,\n      \"circle-stroke-color\": \"#fff\",\n      \"circle-stroke-opacity\": 0.5,\n    },\n  });\n\n  map.addLayer({\n    id: \"cluster-count\",\n    type: \"symbol\",\n    source: \"dcmusic.live\",\n    filter: [\"has\", \"point_count\"],\n    layout: {\n      \"text-field\": \"{sum}\",\n      \"text-font\": [\"Open Sans Bold\"],\n      \"text-size\": 16,\n    },\n    paint: {\n      \"text-color\": \"white\",\n    },\n  });\n\n  map.addLayer({\n    id: \"unclustered-point\",\n    type: \"circle\",\n    source: \"dcmusic.live\",\n    filter: [\"!\", [\"has\", \"point_count\"]],\n    paint: {\n      \"circle-radius\": [\"step\", [\"get\", \"event_count\"], 20, 100, 30, 750, 40],\n      \"circle-color\": \"rgb(229, 36, 59)\",\n      \"circle-opacity\": 0.75,\n      \"circle-stroke-width\": 4,\n      \"circle-stroke-color\": \"#fff\",\n      \"circle-stroke-opacity\": 0.5,\n    },\n  });\n\n  map.addLayer({\n    id: \"event-count\",\n    type: \"symbol\",\n    source: \"dcmusic.live\",\n    filter: [\"!\", [\"has\", \"point_count\"]],\n    layout: {\n      \"text-field\": \"{event_count}\",\n      \"text-font\": [\"Open Sans Bold\"],\n      \"text-size\": 16,\n    },\n    paint: {\n      \"text-color\": \"white\",\n    },\n  });\n}\n"]},"metadata":{},"sourceType":"module"}