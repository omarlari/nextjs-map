{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport { useEffect, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { addDataLayer } from \"../map/addDataLayer\";\nimport { initializeMap } from \"../map/initializeMap\";\nimport { fetcher } from \"../utilities/fetcher\";\nimport styles from \"../styles/Home.module.css\";\n\nconst mapboxgl = require(\"mapbox-gl/dist/mapbox-gl.js\");\n\nexport default function Home() {\n  const {\n    0: pageIsMounted,\n    1: setPageIsMounted\n  } = useState(false);\n  const {\n    0: Map,\n    1: setMap\n  } = useState();\n  const {\n    data,\n    error\n  } = useSWR(\"/api/liveMusic\", fetcher);\n\n  if (error) {\n    console.error(error);\n  }\n\n  mapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN;\n  useEffect(() => {\n    setPageIsMounted(true);\n    let map = new mapboxgl.Map({\n      container: \"my-map\",\n      style: \"mapbox://styles/mapbox/light-v10\",\n      center: [-122.433247, 37.742646],\n      zoom: 13,\n      pitch: 45,\n      maxBounds: [[-122.66336, 37.492987], // Southwest coordinates\n      [-122.250481, 37.871651] // Northeast coordinates\n      ]\n    });\n    initializeMap(mapboxgl, map);\n    setMap(map);\n  }, []);\n  useEffect(() => {\n    if (pageIsMounted && data) {\n      Map.on(\"load\", function () {\n        addDataLayer(Map, data);\n      });\n    }\n  }, [pageIsMounted, setMap, data, Map]);\n  return __jsx(\"div\", {\n    className: styles.container\n  }, __jsx(Head, null, __jsx(\"title\", null, \"Create Next App\"), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/favicon.ico\"\n  }), __jsx(\"link\", {\n    href: \"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css\",\n    rel: \"stylesheet\"\n  })), __jsx(\"main\", {\n    className: styles.main\n  }, __jsx(\"div\", {\n    id: \"my-map\",\n    style: {\n      height: 750,\n      width: 1000\n    }\n  })), __jsx(\"footer\", {\n    className: styles.footer\n  }, __jsx(\"a\", {\n    href: \"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Powered by\", \" \", __jsx(\"img\", {\n    src: \"/vercel.svg\",\n    alt: \"Vercel Logo\",\n    className: styles.logo\n  }))));\n}","map":null,"metadata":{},"sourceType":"module"}