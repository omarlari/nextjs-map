{"ast":null,"code":"var _jsxFileName = \"/Users/olari/github-repos/nextjs-map/front-end/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport { useEffect, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { addDataLayer } from \"../map/addDataLayer\";\nimport { initializeMap } from \"../map/initializeMap\";\nimport { fetcher } from \"../utilities/fetcher\";\nimport styles from \"../styles/Home.module.css\";\n\nconst mapboxgl = require(\"mapbox-gl/dist/mapbox-gl.js\");\n\nexport default function Home() {\n  const {\n    0: pageIsMounted,\n    1: setPageIsMounted\n  } = useState(false);\n  const {\n    0: Map,\n    1: setMap\n  } = useState();\n  const {\n    data,\n    error\n  } = useSWR(\"/api/liveMusic\", fetcher);\n\n  if (error) {\n    console.error(error);\n  }\n\n  mapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN;\n  useEffect(() => {\n    setPageIsMounted(true);\n    let map = new mapboxgl.Map({\n      container: \"my-map\",\n      style: \"mapbox://styles/mapbox/light-v10\",\n      center: [-122.433247, 37.742646],\n      zoom: 13,\n      pitch: 45,\n      maxBounds: [[-122.66336, 37.492987], // Southwest coordinates\n      [-122.250481, 37.871651] // Northeast coordinates\n      ]\n    });\n    initializeMap(mapboxgl, map);\n    setMap(map);\n  }, []);\n  useEffect(() => {\n    if (pageIsMounted && data) {\n      Map.on(\"load\", function () {\n        addDataLayer(Map, data);\n      });\n    }\n  }, [pageIsMounted, setMap, data, Map]);\n  return __jsx(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"Create Next App\"), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/favicon.ico\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }), __jsx(\"link\", {\n    href: \"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css\",\n    rel: \"stylesheet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  })), __jsx(\"main\", {\n    className: styles.main,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    id: \"my-map\",\n    style: {\n      height: 750,\n      width: 1000\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  })), __jsx(\"footer\", {\n    className: styles.footer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, __jsx(\"a\", {\n    href: \"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Powered by\", \" \", __jsx(\"img\", {\n    src: \"/vercel.svg\",\n    alt: \"Vercel Logo\",\n    className: styles.logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/olari/github-repos/nextjs-map/front-end/pages/index.js"],"names":["Head","useEffect","useState","useSWR","addDataLayer","initializeMap","fetcher","styles","mapboxgl","require","Home","pageIsMounted","setPageIsMounted","Map","setMap","data","error","console","accessToken","process","env","NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN","map","container","style","center","zoom","pitch","maxBounds","on","main","height","width","footer","logo"],"mappings":"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","sourcesContent":["import Head from \"next/head\";\nimport { useEffect, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { addDataLayer } from \"../map/addDataLayer\";\nimport { initializeMap } from \"../map/initializeMap\";\nimport { fetcher } from \"../utilities/fetcher\";\nimport styles from \"../styles/Home.module.css\";\nconst mapboxgl = require(\"mapbox-gl/dist/mapbox-gl.js\");\n\nexport default function Home() {\n  const [pageIsMounted, setPageIsMounted] = useState(false);\n  const [Map, setMap] = useState();\n  const { data, error } = useSWR(\"/api/liveMusic\", fetcher);\n\n  if (error) {\n    console.error(error);\n  }\n\n  mapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN;\n\n  useEffect(() => {\n    setPageIsMounted(true);\n\n    let map = new mapboxgl.Map({\n      container: \"my-map\",\n      style: \"mapbox://styles/mapbox/light-v10\",\n      center: [-122.433247, 37.742646],\n      zoom: 13,\n      pitch: 45,\n      maxBounds: [\n        [-122.66336, 37.492987], // Southwest coordinates\n        [-122.250481, 37.871651] // Northeast coordinates\n      ],\n    });\n\n    initializeMap(mapboxgl, map);\n    setMap(map);\n  }, []);\n\n  useEffect(() => {\n    if (pageIsMounted && data) {\n      Map.on(\"load\", function () {\n        addDataLayer(Map, data);\n      });\n    }\n  }, [pageIsMounted, setMap, data, Map]);\n\n  return (\n    <div className={styles.container}>\n      <Head>\n        <title>Create Next App</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n        <link\n          href=\"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css\"\n          rel=\"stylesheet\"\n        />\n      </Head>\n\n      <main className={styles.main}>\n        <div id=\"my-map\" style={{ height: 750, width: 1000 }} />\n      </main>\n\n      <footer className={styles.footer}>\n        <a\n          href=\"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Powered by{\" \"}\n          <img src=\"/vercel.svg\" alt=\"Vercel Logo\" className={styles.logo} />\n        </a>\n      </footer>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}