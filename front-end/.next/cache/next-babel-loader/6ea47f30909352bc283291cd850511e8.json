{"ast":null,"code":"export function addDataLayer(map, data) {\n  if (!map.getSource(\"dcmusic.live\")) {\n    map.addSource(\"dcmusic.live\", {\n      type: \"geojson\",\n      data: data,\n      cluster: true,\n      clusterMaxZoom: 14,\n      clusterRadius: 50,\n      clusterProperties: {\n        sum: [\"+\", [\"get\", \"event_count\"]]\n      }\n    });\n  } else {\n    map.getSource(\"dcmusic.live\").setData(data);\n  }\n\n  map.addLayer({\n    id: \"clusters\",\n    type: \"circle\",\n    source: \"dcmusic.live\",\n    filter: [\"has\", \"point_count\"],\n    paint: {\n      \"circle-color\": \"rgb(229, 36, 59)\",\n      \"circle-radius\": [\"step\", [\"get\", \"point_count\"], 20, 100, 30, 750, 40],\n      \"circle-opacity\": 0.75,\n      \"circle-stroke-width\": 4,\n      \"circle-stroke-color\": \"#fff\",\n      \"circle-stroke-opacity\": 0.5\n    }\n  });\n  map.addLayer({\n    id: \"cluster-count\",\n    type: \"symbol\",\n    source: \"dcmusic.live\",\n    filter: [\"has\", \"point_count\"],\n    layout: {\n      \"text-field\": \"{sum}\",\n      \"text-font\": [\"Open Sans Bold\"],\n      \"text-size\": 16\n    },\n    paint: {\n      \"text-color\": \"white\"\n    }\n  });\n  map.addLayer({\n    id: \"unclustered-point\",\n    type: \"circle\",\n    source: \"dcmusic.live\",\n    filter: [\"!\", [\"has\", \"point_count\"]],\n    paint: {\n      \"circle-radius\": [\"step\", [\"get\", \"event_count\"], 20, 100, 30, 750, 40],\n      \"circle-color\": \"rgb(229, 36, 59)\",\n      \"circle-opacity\": 0.75,\n      \"circle-stroke-width\": 4,\n      \"circle-stroke-color\": \"#fff\",\n      \"circle-stroke-opacity\": 0.5\n    }\n  });\n  map.addLayer({\n    id: \"event-count\",\n    type: \"symbol\",\n    source: \"dcmusic.live\",\n    filter: [\"!\", [\"has\", \"point_count\"]],\n    layout: {\n      \"text-field\": \"{event_count}\",\n      \"text-font\": [\"Open Sans Bold\"],\n      \"text-size\": 16\n    },\n    paint: {\n      \"text-color\": \"white\"\n    }\n  });\n}","map":null,"metadata":{},"sourceType":"module"}